name: setup-rye
description: Install Rye, the package manager for Python

inputs:
  install_option:
    description: Options to be passed to the installer
    required: false
    default: --yes
  version:
    description: Rye version to install
    required: false
    # renovate: datasource=github-releases depName=rye packageName=mitsuhiko/rye
    default: 0.29.0

runs:
  using: composite
  steps:
    - name: Cache Rye installation
      uses: actions/cache@ab5e6d0c87105b4c9c2047343972218f562e4319 # v4.0.1
      with:
        path: ~/.rye
        key: ${{ runner.os }}-rye-${{ inputs.version }}

    - name: Install Rye
      shell: bash
      run: curl -sSf https://rye-up.com/get | bash
      env:
        RYE_INSTALL_OPTION: ${{ inputs.install_option }}
        RYE_VERSION: ${{ inputs.version }}

    - name: Append Rye to PATH
      shell: bash
      run: echo "$HOME/.rye/shims" >> "$GITHUB_PATH"
